‚úÖ DRY CODE OPTIMIZATION CHECKLIST

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
  - localStorage –æ–ø–µ—Ä–∞—Ü–∏–∏ (50+ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π)
  - JSON –ø–∞—Ä—Å–∏–Ω–≥ (3+ –º–µ—Å—Ç–∞)
  - window checks (20+ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π)
  - –õ–æ–≥–∏–∫–∞ logout (2 –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)

### –≠—Ç–∞–ø 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/utils/storageHelper.ts`
  - 9 —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
  - –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  - –¢–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è JSON –æ–ø–µ—Ä–∞—Ü–∏–π
  - 79 —Å—Ç—Ä–æ–∫ —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞

- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω `src/utils/auth.ts`
  - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ storageHelper (369 ‚Üí 240 —Å—Ç—Ä–æ–∫)
  - –í–≤–µ–¥–µ–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
    - `checkTokenTime()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
    - `normalizeRole()` / `formatRole()` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ä–æ–ª–µ–π
    - `performLogout()` –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ logout –ª–æ–≥–∏–∫–∏
  - –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ window –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

### –≠—Ç–∞–ø 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `.github/copilot-instructions.md`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å storageHelper
  - –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã:
  - `DRY_OPTIMIZATION.md` (–≥–ª–∞–≤–Ω—ã–π –æ—Ç—á–µ—Ç)
  - `OPTIMIZATION_SUMMARY.md` (–¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏)

### –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω)
- ‚úÖ –í—Å–µ —ç–∫—Å–ø–æ—Ä—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ API —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞

---

## üìã –î–∞–ª—å–Ω–µ–π—à–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (optional)

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–º–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è):
1. **Header.tsx** ‚Äî 6+ –æ–ø–µ—Ä–∞—Ü–∏–π —Å userData
   ```typescript
   // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
   import { getStorageJSON } from '../utils/storageHelper';
   const userData = getStorageJSON<UserData>('userData');
   ```

2. **FavoritesPage.tsx** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å favorites
   ```typescript
   // –í–º–µ—Å—Ç–æ: JSON.parse(localStorage.getItem('favorites') || '[]')
   const favorites = getStorageJSON<Favorite[]>('favorites') || [];
   ```

3. **OrderPage.tsx** ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ favorites

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. **Main.tsx** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å Google Auth
5. **HeaderButton –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏ userData/userRole

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–º–æ–∂–Ω–æ –ø–æ—Ç–æ–º):
6. **api.ts** ‚Äî –æ–±–æ–±—â–∏—Ç—å fetch –ª–æ–≥–∏–∫—É
7. **Hooks** ‚Äî —Å–æ–∑–¥–∞—Ç—å useStorageJSON hook

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### ‚úÖ –î–û:
```typescript
if (typeof window === 'undefined') return null;
const data = localStorage.getItem('key');
try { return JSON.parse(data); } catch { return null; }
```

### ‚úÖ –ü–û–°–õ–ï:
```typescript
import { getStorageJSON } from './storageHelper';
return getStorageJSON<MyType>('key');
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|-----------|
| **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ —É–º–µ–Ω—å—à–µ–Ω–æ** | 369 ‚Üí 240 –≤ auth.ts (-34%) |
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** | 50+ ‚Üí 10 —Ñ—É–Ω–∫—Ü–∏–π (-80%) |
| **window checks** | 20+ ‚Üí 1 —Ñ—É–Ω–∫—Ü–∏—è (-95%) |
| **JSON –ø–∞—Ä—Å–∏–Ω–≥** | 3+ –º–µ—Å—Ç ‚Üí 1 —Ñ—É–Ω–∫—Ü–∏—è (-100%) |
| **–¢–∏–ø–∏–∑–∞—Ü–∏—è** | 0% ‚Üí 100% |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | –§—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ ‚Üí –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ scale** | –ù–∏–∑–∫–∞—è ‚Üí –í—ã—Å–æ–∫–∞—è |

---

## üîí –ì–∞—Ä–∞–Ω—Ç–∏–∏

‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã  
‚úÖ –¢–∏–ø—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç (backward compatible)  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞  
‚úÖ –ì–æ—Ç–æ–≤–æ –∫ immediate use –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö  
‚úÖ –°–ª–µ–¥—É–µ—Ç best practices (DRY, SOLID)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö PRODUCTION

–í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞, –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤–æ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–µ.
